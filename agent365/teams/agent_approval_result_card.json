{
  "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
  "type": "AdaptiveCard",
  "version": "1.5",
  "body": [
    {
      "type": "Container",
      "style": "${decision_style}",
      "bleed": true,
      "items": [
        {
          "type": "ColumnSet",
          "columns": [
            {
              "type": "Column",
              "width": "auto",
              "items": [
                {
                  "type": "Image",
                  "url": "${decision_icon_url}",
                  "size": "Small"
                }
              ]
            },
            {
              "type": "Column",
              "width": "stretch",
              "items": [
                {
                  "type": "TextBlock",
                  "text": "${decision_title}",
                  "weight": "Bolder",
                  "size": "Large",
                  "wrap": true,
                  "color": "${decision_color}"
                },
                {
                  "type": "TextBlock",
                  "text": "Agent: Next Best Action",
                  "spacing": "None",
                  "isSubtle": true
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "Container",
      "items": [
        {
          "type": "TextBlock",
          "text": "üìã Deployment Details",
          "weight": "Bolder",
          "size": "Medium",
          "spacing": "Medium"
        },
        {
          "type": "FactSet",
          "facts": [
            {
              "title": "Environment",
              "value": "${environment}"
            },
            {
              "title": "Cluster",
              "value": "${cluster}"
            },
            {
              "title": "Namespace",
              "value": "${namespace}"
            },
            {
              "title": "Commit SHA",
              "value": "${commit_sha}"
            }
          ]
        }
      ]
    },
    {
      "type": "Container",
      "separator": true,
      "items": [
        {
          "type": "TextBlock",
          "text": "üìù Decision Details",
          "weight": "Bolder",
          "size": "Medium",
          "spacing": "Medium"
        },
        {
          "type": "FactSet",
          "facts": [
            {
              "title": "Decision",
              "value": "${decision}"
            },
            {
              "title": "Decided By",
              "value": "${approved_by}"
            },
            {
              "title": "Decision Time",
              "value": "${decision_timestamp}"
            },
            {
              "title": "Agent Validation",
              "value": "${agent_validation_status}"
            }
          ]
        }
      ]
    },
    {
      "type": "Container",
      "isVisible": "${has_comment}",
      "items": [
        {
          "type": "TextBlock",
          "text": "üí¨ Comment",
          "weight": "Bolder",
          "size": "Medium"
        },
        {
          "type": "TextBlock",
          "text": "${approval_comment}",
          "wrap": true,
          "isSubtle": true
        }
      ]
    },
    {
      "type": "Container",
      "separator": true,
      "items": [
        {
          "type": "TextBlock",
          "text": "üîí Audit Information",
          "weight": "Bolder",
          "size": "Medium",
          "spacing": "Medium"
        },
        {
          "type": "FactSet",
          "facts": [
            {
              "title": "Approval ID",
              "value": "${approval_id}"
            },
            {
              "title": "Request Time",
              "value": "${request_timestamp}"
            },
            {
              "title": "Resolution Time",
              "value": "${resolution_time_seconds}s"
            }
          ]
        }
      ]
    }
  ],
  "msteams": {
    "width": "Full"
  }
}
